<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Druckerei Rechnung</title>
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" defer></script>
</head>
<body>
<div class="container container-flu:w
uuid p-4">
  <h2>Rechnung</h2>

  <table class="table">
    <tbody>
        <tr>
            <td></td>
            <td>Druckerei mit Lieferservice, B46</td>
        </tr>
        <tr>
            <th>An:</th>
            <td id="customer">Loading...</td>
        </tr>
        <tr>
            <th>Datum:</th>
            <td id="date">Loading...</td>
        </tr>
    </tbody>
  </table>
  
  <table class="table">
    <thead>
        <tr>
            <th>Dienstelistung</th>
            <th>Einzelpreis</th>
            <th>Stück</th>
            <th>Gesamtpreis</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Druck, <span id="pagetype">Keine Angabe</span></td>
            <td id="pageprice">0.00</td>
            <td id="numberprint">0</td>
            <td id="priceprint">0.00</td>
        </tr>
        <tr>
            <td>Lieferung</td>
            <td>2.00</td>
            <td id="numberdelivery">0</td>
            <td id="pricedelivery">0.00</td>
        </tr>
        <tr>
            <td>Flyer falten</td>
            <td>1.00</td>
            <td id="numberfolding">0</td>
            <td id="pricefolding">0.00</td>
        </tr>
        <tr>
            <td>Schriftliche Rechnung</td>
            <td>2.00</td>
            <td id="numberbill">0</td>
            <td id="pricebill">0.00</td>
        </tr>
        <tr>
            <th colspan="3">Vorsumme</th>
            <th id="pricepre">0.00</th>
        </tr>
        <tr>
            <td colspan="2">Rabatt</td>
            <td><span id="numberdiscount">0</span>%</td>
            <td>- <span id="pricediscount">0.00</span></td>
        </tr>
        <tr>
            <th colspan="3">Summe</th>
            <th id="priceafter">0.00</th>
        </tr>
    </tbody>
  </table>

  <div class="container border rounded p-3 mt-4 d-none" id="discount-code-container">
    <h4>GUTSCHEIN</h4>
    <p>Zeige diesen Code bei deinem nächsten Einkauf vor und erhalte 10% Rabatt!!!</p>
    <code id="discount-code">UNGÜLTIGER-CODE</code>
  </div>
</div>

<script defer>
const params = new URLSearchParams(window.location.search);
document.getElementById("date").innerText = new Date().toLocaleDateString();
for (const key of ["customer", "pagetype", "pageprice", "numberprint", "priceprint", "numberdelivery", "pricedelivery", "numberfolding", "pricefolding", "numberbill", "pricebill", "pricepre", "numberdiscount", "pricediscount", "priceafter"]) {
    if (params.get(key) == "" || params.get(key) == undefined) {
        continue;
    }
    console.log(key);
    document.getElementById(key).innerText = params.get(key);
}

if (params.get("priceafter") >= 100) {
    document.getElementById("discount-code-container").classList.remove("d-none");
}
</script>
</body>